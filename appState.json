{"EDITOR_STATE":{"allProjectFiles":{"932318f9-0f8b-475c-9d99-1cfe801292c4":{"id":"932318f9-0f8b-475c-9d99-1cfe801292c4","parent":null,"name":"TEST","type":"DIRECTORY","isDirectory":true,"children":["e32bc3f0-eb72-4400-bee8-d67305b3795c","aa72f105-8463-4fa8-a986-2762995d4013","6e35e014-b33a-4c20-bca7-a70456ab368e","8a28a891-83bc-468f-995a-d838c972e6f4"],"isRemovable":false,"filePath":"TEST"},"e32bc3f0-eb72-4400-bee8-d67305b3795c":{"id":"e32bc3f0-eb72-4400-bee8-d67305b3795c","parent":"932318f9-0f8b-475c-9d99-1cfe801292c4","name":"SaveProject.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"TEST/SaveProject.js","code":"let AWS = require('aws-sdk');\nconst ddb = new AWS.DynamoDB.DocumentClient();\nlet uuid = require('uuid');\n\nexports.handler = function (event, context, callback) {\n\n    let createdTime = event.createdTime || new Date().getTime();\n    let updatedTime = new Date().getTime();\n    let projectId = event.projectId || (createdTime + \"-\" + uuid.v4());\n\n    ddb.put({\n        TableName: 'SigmaUserProjects',\n        Item: {\n            'name': event.name,\n            'username': event.username,\n            projectId,\n            'description': event.description,\n            'functions': event.functions,\n            createdTime,\n            updatedTime\n        }\n    }, function (err, data) {\n        callback(err, {\n            projectId\n        });\n    });\n}","triggers":[{"resourceName":"apigusEast1SigmaProjectspost","config":{}}],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"testCases":{"f5db0cd0-1186-486d-ad0b-715eaaba2ff5":{"id":"f5db0cd0-1186-486d-ad0b-715eaaba2ff5","name":"Project1","functionId":"e32bc3f0-eb72-4400-bee8-d67305b3795c","event":"{\n    \"username\":\"cwidanage\",\n    \"name\": \"Project1\",\n    \"description\": \"Sample project description for a project created for serverless ide sigma\",\n    \"projectId\":\"4b7d40c0-8d0e-4f1a-80d7-d837717d8a95\",\n    \"functions\": [\"value3\"]\n}"},"d8616f9f-d75f-457b-91b4-95166085e1f3":{"id":"d8616f9f-d75f-457b-91b4-95166085e1f3","name":"Project2","functionId":"e32bc3f0-eb72-4400-bee8-d67305b3795c","event":"{\n    \"username\":\"cwidanage\",\n    \"name\": \"Project2\",\n    \"description\": \"Sample project description for a project created for serverless ide sigma\",\n    \"functions\": [\"value3\",\"a\",\"b\",\"d\"]\n}"}}},"aa72f105-8463-4fa8-a986-2762995d4013":{"id":"aa72f105-8463-4fa8-a986-2762995d4013","parent":"932318f9-0f8b-475c-9d99-1cfe801292c4","name":"GetProjects.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"TEST/GetProjects.js","code":"let AWS = require('aws-sdk');\nconst ddb = new AWS.DynamoDB.DocumentClient();\n\nexports.handler = function (event, context, callback) {\n\n    let response = {\n        \"statusCode\": 200,\n        \"headers\": {\n            \"Access-Control-Allow-Origin\": \"*\"\n        },\n        \"body\": \"...\"\n    };\n\n    let username = event.queryStringParameters.username;\n\n    var cognitoidentityserviceprovider = new AWS.CognitoIdentityServiceProvider();\n    cognitoidentityserviceprovider.getUser({AccessToken:\"eyJraWQiOiJha1N5eVRLK05HZlV0OFMzYnVzNlNJV3d0VDlxVitsbHFDMzh6YnowTElVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJiNTBhNWIwNi03ZWU5LTQwOTQtOWM3My1mOTc0MTFhYmZmNjgiLCJldmVudF9pZCI6ImUwNGQzNGFiLTdmNGYtMTFlOC04MmE2LTViNjk3ZmFiNWI2NCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE1MzA2ODQxNjcsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC51cy1lYXN0LTEuYW1hem9uYXdzLmNvbVwvdXMtZWFzdC0xX243Y0tON2wxdCIsImV4cCI6MTUzMDc2ODU2OSwiaWF0IjoxNTMwNzY0OTY5LCJqdGkiOiI1NjRiOTQ3OS01ZDIwLTQ3OGUtYjAyOC01NTJiYTE1OTZmNTQiLCJjbGllbnRfaWQiOiJqODQ4dWM0a3VqY2tjMmowdHRyMHRxajlvIiwidXNlcm5hbWUiOiJjd2lkYW5hZ2UifQ.MODbudESeRAZxGWy8YajBq6y5QsSs3Ew-tThH7XHkFAr75uANwrC6Qk1vvQBM4HX-t0Q_rneFJo77s6KqaDsaNo6Gd9BVD4OYsKB0-C09jGe_gsmSg-x5EZxCRe06djw8oTNq8xAinzHAsrAJ5MWu4_0kyfGTF-tCz5euESvg16ycQrXmAHwREy0Kj2jnHyh6fSf0C5VgFLSH3ZeC6ljgCZDaKrOfpc2OVQanlOh0vTDwVCfl3UwHkNpUxK1wa30jvS-A7hH8mVZnEm7287GO8k_MuQqvU6Vs0GTGypSs_0v12GI8SRIITUTZoFIUXfkB6NU9D3v1GP1zya-1hVQ4w\"}, function (err, data) {\n        if (err) console.log(err, err.stack); // an error occurred\n        else console.log(data);           // successful response\n    });\n\n    console.log(\"Searching for\", username);\n\n    ddb.query({\n        TableName: 'SigmaUserProjects',\n        ExpressionAttributeValues: { ':username': username },\n        KeyConditionExpression: 'username = :username',\n    }, function (err, data) {\n        if (!err) {\n            console.log(\"Successfully queried\", data.Items.length, \"for\", username);\n            response.body = JSON.stringify(data.Items);\n        } else {\n            console.error(\"Error occurred when searching for projects of\", username, err);\n        }\n        callback(err, response);\n    });\n}","triggers":[{"resourceName":"apigusEast1SigmaProjectsget","config":{}}],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"testCases":{"f3003788-e3eb-48f4-b74c-8698d3d69008":{"id":"f3003788-e3eb-48f4-b74c-8698d3d69008","name":"Unnamed event","functionId":"aa72f105-8463-4fa8-a986-2762995d4013","event":"{\n    \"queryStringParameters\": {\n        \"username\":\"cwidanage\"\n    }\n}"}},"customSecurityPolicy":{"Version":"2012-10-17","Statement":[]}},"6e35e014-b33a-4c20-bca7-a70456ab368e":{"id":"6e35e014-b33a-4c20-bca7-a70456ab368e","parent":"932318f9-0f8b-475c-9d99-1cfe801292c4","name":"RemoveProject.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"TEST/RemoveProject.js","code":"let AWS = require('aws-sdk');\nconst ddb = new AWS.DynamoDB.DocumentClient();\n\nexports.handler = function (event, context, callback) {\n\n    let response = {\n        \"isBase64Encoded\": 1,\n        \"statusCode\": 200,\n        \"headers\": {\n            \"Access-Control-Allow-Origin\": \"*\"\n        },\n        \"body\": \"...\"\n    }\n\n    let username = event.queryStringParameters.username;\n    let projectId = event.queryStringParameters.projectId;\n    ddb.delete({\n        TableName: 'SigmaUserProjects',\n        Key: { 'username': username, 'projectId': projectId }\n    }, function (err, data) {\n        if (!err) {\n            response.body = \"Successfully deleted \" + projectId;\n        }else{\n            response.statusCode = 500;\n        }\n        callback(err,response);\n    });\n}","triggers":[{"resourceName":"apigusEast1SigmaProjectsdelete","config":{}}],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"testCases":{"6a44e1ec-bff4-415c-8da7-7482a8aa8ae3":{"id":"6a44e1ec-bff4-415c-8da7-7482a8aa8ae3","name":"Remove project","functionId":"6e35e014-b33a-4c20-bca7-a70456ab368e","event":"{\n    \"queryStringParameters\": {\n        \"username\":\"cwidanage\",\n        \"projectId\":\"1530613971577_2ba1e5c3-00f7-43fc-8ba4-5374a21e028f\"\n    }\n}"}}},"8a28a891-83bc-468f-995a-d838c972e6f4":{"id":"8a28a891-83bc-468f-995a-d838c972e6f4","parent":"932318f9-0f8b-475c-9d99-1cfe801292c4","name":"Auth.js","type":"JS_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"TEST/Auth.js","code":"const AWS = require('aws-sdk');\r\nconst cognitoidentityserviceprovider = new AWS.CognitoIdentityServiceProvider();\r\nexports.auth = function (event, callback) {\r\n    cognitoidentityserviceprovider.getUser({ AccessToken: \"eyJraWQiOiJha1N5eVRLK05HZlV0OFMzYnVzNlNJV3d0VDlxVitsbHFDMzh6YnowTElVPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJiNTBhNWIwNi03ZWU5LTQwOTQtOWM3My1mOTc0MTFhYmZmNjgiLCJldmVudF9pZCI6ImUwNGQzNGFiLTdmNGYtMTFlOC04MmE2LTViNjk3ZmFiNWI2NCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE1MzA2ODQxNjcsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC51cy1lYXN0LTEuYW1hem9uYXdzLmNvbVwvdXMtZWFzdC0xX243Y0tON2wxdCIsImV4cCI6MTUzMDc2ODU2OSwiaWF0IjoxNTMwNzY0OTY5LCJqdGkiOiI1NjRiOTQ3OS01ZDIwLTQ3OGUtYjAyOC01NTJiYTE1OTZmNTQiLCJjbGllbnRfaWQiOiJqODQ4dWM0a3VqY2tjMmowdHRyMHRxajlvIiwidXNlcm5hbWUiOiJjd2lkYW5hZ2UifQ.MODbudESeRAZxGWy8YajBq6y5QsSs3Ew-tThH7XHkFAr75uANwrC6Qk1vvQBM4HX-t0Q_rneFJo77s6KqaDsaNo6Gd9BVD4OYsKB0-C09jGe_gsmSg-x5EZxCRe06djw8oTNq8xAinzHAsrAJ5MWu4_0kyfGTF-tCz5euESvg16ycQrXmAHwREy0Kj2jnHyh6fSf0C5VgFLSH3ZeC6ljgCZDaKrOfpc2OVQanlOh0vTDwVCfl3UwHkNpUxK1wa30jvS-A7hH8mVZnEm7287GO8k_MuQqvU6Vs0GTGypSs_0v12GI8SRIITUTZoFIUXfkB6NU9D3v1GP1zya-1hVQ4w\" }, function (err, data) {\r\n        if (err) console.log(err, err.stack); // an error occurred\r\n        else console.log(data);           // successful response\r\n    });\r\n}","triggers":[]}},"rootNode":"932318f9-0f8b-475c-9d99-1cfe801292c4","openFiles":["e32bc3f0-eb72-4400-bee8-d67305b3795c","aa72f105-8463-4fa8-a986-2762995d4013","6e35e014-b33a-4c20-bca7-a70456ab368e","8a28a891-83bc-468f-995a-d838c972e6f4"],"currentFileId":"aa72f105-8463-4fa8-a986-2762995d4013","resources":{"ddbSigmaProjects":{"name":"ddbSigmaProjects","type":"DynamoDB","config":{"mode":0,"operation":"query","table":{"arn":"","name":"SigmaProjects","partitionKey":"id","partitionKeyType":"S","hasSortKey":true,"sortKey":"name","sortKeyType":"S","mode":0},"parameters":{"Key":{},"Item":{},"ExpressionAttributeValues":{":username":"@{username}"},"KeyConditionExpression":"id = :username","FilterExpression":""},"validator":{"validatableFields":{},"validity":true},"valid":true},"globallyEditable":false},"apigusEast1SigmaProjectsget":{"name":"apigusEast1SigmaProjectsget","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":0,"apiName":"SigmaProjects","endpointType":"EDGE","resourceMode":0,"resourcePath":"/","resourceName":"","resourceId":"phbcku4s95","restMethod":"GET","proxyIntegration":true,"enableCORS":true,"stageMode":0,"stageName":"staging"},"globallyEditable":true},"ddbSigmaUserProjects":{"name":"ddbSigmaUserProjects","type":"DynamoDB","config":{"mode":0,"operation":"delete","table":{"arn":"","name":"SigmaUserProjects","partitionKey":"username","partitionKeyType":"S","hasSortKey":true,"sortKey":"projectId","sortKeyType":"S","mode":0},"parameters":{"Key":{"username":"@{username}","projectId":"@{projectId}"},"Item":{},"ExpressionAttributeValues":{}},"validator":{"validatableFields":{},"validity":true},"valid":true},"globallyEditable":false},"apigusEast1SigmaProjectsdelete":{"name":"apigusEast1SigmaProjectsdelete","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":0,"apiName":"SigmaProjects","endpointType":"EDGE","resourceMode":0,"resourceName":"","resourcePath":"/","restMethod":"DELETE","proxyIntegration":true,"enableCORS":true,"stageMode":0,"stageName":"staging"},"globallyEditable":true},"apigusEast1SigmaProjectspost":{"name":"apigusEast1SigmaProjectspost","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":0,"apiName":"SigmaProjects","endpointType":"EDGE","resourceMode":0,"resourceName":"","resourcePath":"/","restMethod":"POST","proxyIntegration":false,"enableCORS":true,"stageMode":0,"stageName":"staging"},"globallyEditable":true}},"envVariables":[{"lambdaId":"all","varKey":"SIGMA_AWS_ACC_ID","varValue":null,"shouldPersist":false,"editable":false}],"packageJSON":{"dependencies":{"aws-sdk":{"name":"aws-sdk","version":"2.176.0","notRemovable":true}}},"lambdaId":"e32bc3f0-eb72-4400-bee8-d67305b3795c","additionalFiles":[]},"PROJECT_META":{"projectName":"TEST","projectDescription":"","projectVersion":"1.0.0","projectRegion":"us-east-1","repoName":"JK","repoUrl":"https://github.com/rahi9208/JK","lastSave":1529905665789},"VCS_STATE":{"provider":"GITHUB","repo":{"name":"JK","url":"https://github.com/rahi9208/JK"}}}